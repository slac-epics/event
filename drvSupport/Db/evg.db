record(eg, "EVG:$(LOCA):$(UNIT):CTRL") {
  field(DESC, "EVG $(UNIT) Control")
  field(DTYP, "MRF Event Generator")
  field(OUT, "#C$(CARD) S0 @")
  field(PINI, "YES")
  field(ENAB, "YES")
# Clock speed if using internal clock
  field(R1SP, "118999921")
  field(R2SP, "118999921")
# Clock prescaler (0 = external clock)
  field(R1CK, "1")
  field(R2CK, "1")
# Max # ticks for any RAM entry (1/360 sec - ~500usec) at 119MHz
  field(RMAX, "271000")
# Start with Sequence RAMs off so they can be set up during initialization
  field(MOD1, "Off")
  field(MOD2, "Off")
# Only one EVG exists
  field(FIFO, "NO")
# Use the AC input divider for sequence trigger enable
  field(ASQ1, "YES")
  field(ASQ2, "YES")
# Don't trigger event output 0 from AC input divider.
  field(AEV0, "NO")
# Don't synchronize AC input trigger with multiplexed counter, don't divide it, and don't delay it.
  field(ASYN, "NO")
# ADIV of 0 means bypass phase and divide logic.
  field(ADIV, "0")
  field(APHS, "0")
# There are no input events, all ET* fields left at 0.
# There is no multiplexed counter, all MC*,MD*,ME*,MS* fields left at 0.
}

# In order to take care of the heart beat (0x7A) and time stamp reset/resync 
# (0x7D) events, longout records are used that have their output links 
# pointed to the VME field on the above EG record. When they are processed, 
# the DOL field of the longout record is sent out on the event system.
record(longout, "EVG:$(LOCA):$(UNIT):HEARTBEAT") {
  field(DESC, "EVG $(UNIT) Heartbeat")
  field(SCAN, "1 second")
  field(OUT, "EVG:$(LOCA):$(UNIT):CTRL.VME  PP")
  field(DOL, "122")
  field(OMSL, "closed_loop")
}

record(longout, "EVG:$(LOCA):$(UNIT):RESYNC") {
  field(DESC, "EVG $(UNIT) Resynchronize")
  field(SCAN, "10 second")
  field(OUT, "EVG:$(LOCA):$(UNIT):CTRL.VME  PP")
  field(DOL, "125")
  field(OMSL, "closed_loop")
}

record(longout, "EVG:$(LOCA):$(UNIT):EVENT") {
  field(DESC, "EVG $(UNIT) Event Code")
  field(PINI, "YES")
  field(DRVH, "256")
  field(DRVL, "1")
  field(MDEL, "-1")
}

record(seq, "EVG:$(LOCA):$(UNIT):EVENTSEND") {
  field(DESC, "EVG $(UNIT) Send Event Code")
  field(DOL1, "EVG:$(LOCA):$(UNIT):EVENT")
  field(LNK1, "EVG:$(LOCA):$(UNIT):CTRL.VME PP")
}

record(bo, "EVG:$(LOCA):$(UNIT):SEQ1SEND") {
  field(DESC, "EVG $(UNIT) Send Seq 1")
  field(ZNAM, "No Trigger")
  field(ONAM, "Trigger")
  field(DOL,  "1")
  field(OMSL, "closed_loop")
  field(OUT, "EVG:$(LOCA):$(UNIT):CTRL.TRG1 PP")
}

record(bo, "EVG:$(LOCA):$(UNIT):SEQ2SEND") {
  field(DESC, "EVG $(UNIT) Send Seq 2")
  field(ZNAM, "No Trigger")
  field(ONAM, "Trigger")
  field(DOL,  "1")
  field(OMSL, "closed_loop")
  field(OUT, "EVG:$(LOCA):$(UNIT):CTRL.TRG2 PP")
}
