#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(bi, "$(DEV):$(SECN)$(MDID)GO") {
  field(DESC, "Start $(SECN) Avg")
  field(DISV, "0")
  field(SDIS, "IOC:$(LOCA):$(UNIT):MODIFIER5.$(BIT)")
  field(DISS, "INVALID")
  field(FLNK, "$(DEV):$(SECN)$(MDID)")
}

record(sSub, "$(DEV):$(SECN)$(MDID)") {
  field(DESC, "$(SECN) Avg for EDEF $(DESC)")
  field(INPA, "$(INP)")
  field(INPB, "IOC:$(LOCA):$(UNIT):EDAVGDONE.$(BIT)")
  field(INPC, "IOC:$(LOCA):$(UNIT):EDEFMEASSEVR.$(BIT)")
  field(INPD, "IOC:$(LOCA):$(UNIT):MODIFIER5.$(BIT)")
  field(INPE, "$(INP).SEVR")
  field(EGU, "$(EGU)")
  field(HOPR, "$(HOPR)")
  field(LOPR, "$(LOPR)")
  field(PREC, "$(PREC)")
  field(ADEL, "$(ADEL)")
  field(MDEL, "-1")
  field(SNAM, "bsaSecnAvg")
  field(BRSV, "INVALID")
  field(FLNK, "$(DEV):$(SECN)HST$(MDID)")
}

record(compress, "$(DEV):$(SECN)HST$(MDID)") {
  field(DESC, "$(SECN) Hst for EDEF $(DESC)")
  field(INP, "$(DEV):$(SECN)$(MDID)")
  field(ALG, "Circular Buffer")
  field(NSAM, "2800")
  field(HOPR, "$(HOPR)")
  field(LOPR, "$(LOPR)")
  field(PREC, "$(PREC)")
  field(EGU, "$(EGU)")
  field(DISV, "0")
  field(SDIS, "$(DEV):$(SECN)$(MDID).X")
  field(FLNK, "$(DEV):$(SECN)CNTHST$(MDID)")
}

record(seq, "$(DEV):$(SECN)INIT$(MD)") {
  field(DESC, "EDEF $(DESC) Reset Seq")
  field(SELM, "All")
  field(LNK3, "$(DEV):$(SECN)HST$(MDID).RES")
  field(DOL1, "1")
  field(LNK1, "$(DEV):$(SECN)$(MDID).O")
  field(LNK2, "$(DEV):$(SECN)CNTHST$(MDID).RES")
  field(SCAN, "Event")
  field(EVNT, "$(EC)")
  field(PRIO, "LOW")
  field(LNK4, "$(DEV):$(SECN)$(MDID).G")
  field(DOL4, "1")
  field(LNK5, "$(DEV):$(SECN)RMSHST$(MDID).RES")
}

record(compress, "$(DEV):$(SECN)CNTHST$(MDID)") {
  field(DESC, "HST #Pulses avged-EDEF $(DESC)")
  field(INP, "$(DEV):$(SECN)$(MDID).M")
  field(ALG, "Circular Buffer")
  field(NSAM, "2800")
  field(HOPR, "100")
  field(LOPR, "0")
  field(EGU, "Averaged values")
  field(DISV, "0")
  field(SDIS, "$(DEV):$(SECN)$(MDID).X")
  field(FLNK, "$(DEV):$(SECN)RMSHST$(MDID)")
}

record(compress, "$(DEV):$(SECN)RMSHST$(MDID)") {
  field(DESC, "HST RMS-EDEF $(DESC)")
  field(INP, "$(DEV):$(SECN)$(MDID).L")
  field(ALG, "Circular Buffer")
  field(NSAM, "2800")
  field(HOPR, "100")
  field(LOPR, "0")
  field(EGU, "RMS")
  field(DISV, "0")
  field(SDIS, "$(DEV):$(SECN)$(MDID).X")
}

#! Further lines contain data used by VisualDCT
#! View(2299,2256,0.9)
#! Record("$(DEV):$(SECN)$(MDID)GO",2080,2494,0,0,"$(DEV):$(SECN)$(MDID)GO")
#! Field("$(DEV):$(SECN)$(MDID)GO.SDIS",16777215,1,"$(DEV):$(SECN)$(MDID)GO.SDIS")
#! Field("$(DEV):$(SECN)$(MDID)GO.FLNK",16777215,1,"$(DEV):$(SECN)$(MDID)GO.FLNK")
#! Link("$(DEV):$(SECN)$(MDID)GO.FLNK","$(DEV):$(SECN)$(MDID)")
#! Record("$(DEV):$(SECN)$(MDID)",2413,2512,0,0,"$(DEV):$(SECN)$(MDID)")
#! Field("$(DEV):$(SECN)$(MDID).INPA",16777215,1,"$(DEV):$(SECN)$(MDID).INPA")
#! Field("$(DEV):$(SECN)$(MDID).INPB",16777215,0,"$(DEV):$(SECN)$(MDID).INPB")
#! Field("$(DEV):$(SECN)$(MDID).INPC",16777215,1,"$(DEV):$(SECN)$(MDID).INPC")
#! Field("$(DEV):$(SECN)$(MDID).INPD",16777215,1,"$(DEV):$(SECN)$(MDID).INPD")
#! Field("$(DEV):$(SECN)$(MDID).INPE",16777215,1,"$(DEV):$(SECN)$(MDID).INPE")
#! Field("$(DEV):$(SECN)$(MDID).VAL",16777215,1,"$(DEV):$(SECN)$(MDID).VAL")
#! Field("$(DEV):$(SECN)$(MDID).O",16777215,0,"$(DEV):$(SECN)$(MDID).O")
#! Field("$(DEV):$(SECN)$(MDID).G",16777215,0,"$(DEV):$(SECN)$(MDID).G")
#! Field("$(DEV):$(SECN)$(MDID).M",16777215,1,"$(DEV):$(SECN)$(MDID).M")
#! Field("$(DEV):$(SECN)$(MDID).L",16777215,1,"$(DEV):$(SECN)$(MDID).L")
#! Field("$(DEV):$(SECN)$(MDID).X",16777215,1,"$(DEV):$(SECN)$(MDID).X")
#! Field("$(DEV):$(SECN)$(MDID).FLNK",16777215,1,"$(DEV):$(SECN)$(MDID).FLNK")
#! Link("$(DEV):$(SECN)$(MDID).FLNK","$(DEV):$(SECN)HST$(MDID)")
#! Record("$(DEV):$(SECN)HST$(MDID)",2800,2408,0,0,"$(DEV):$(SECN)HST$(MDID)")
#! Field("$(DEV):$(SECN)HST$(MDID).INP",16777215,0,"$(DEV):$(SECN)HST$(MDID).INP")
#! Link("$(DEV):$(SECN)HST$(MDID).INP","$(DEV):$(SECN)$(MDID).VAL")
#! Field("$(DEV):$(SECN)HST$(MDID).SDIS",16777215,0,"$(DEV):$(SECN)HST$(MDID).SDIS")
#! Link("$(DEV):$(SECN)HST$(MDID).SDIS","$(DEV):$(SECN)$(MDID).X")
#! Field("$(DEV):$(SECN)HST$(MDID).RES",16777215,0,"$(DEV):$(SECN)HST$(MDID).RES")
#! Field("$(DEV):$(SECN)HST$(MDID).FLNK",16777215,1,"$(DEV):$(SECN)HST$(MDID).FLNK")
#! Link("$(DEV):$(SECN)HST$(MDID).FLNK","$(DEV):$(SECN)CNTHST$(MDID)")
#! Record("$(DEV):$(SECN)INIT$(MD)",2080,2074,0,0,"$(DEV):$(SECN)INIT$(MD)")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK1",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK1")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK1","$(DEV):$(SECN)$(MDID).O")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK2",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK2")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK2","$(DEV):$(SECN)CNTHST$(MDID).RES")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK3",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK3")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK3","$(DEV):$(SECN)HST$(MDID).RES")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK4",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK4")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK4","$(DEV):$(SECN)$(MDID).G")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK5",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK5")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK5","$(DEV):$(SECN)RMSHST$(MDID).RES")
#! Visibility("$(DEV):$(SECN)INIT$(MD).LNK2",1)
#! Record("$(DEV):$(SECN)CNTHST$(MDID)",3160,2603,0,0,"$(DEV):$(SECN)CNTHST$(MDID)")
#! Field("$(DEV):$(SECN)CNTHST$(MDID).INP",16777215,0,"$(DEV):$(SECN)CNTHST$(MDID).INP")
#! Link("$(DEV):$(SECN)CNTHST$(MDID).INP","$(DEV):$(SECN)$(MDID).M")
#! Field("$(DEV):$(SECN)CNTHST$(MDID).SDIS",16777215,0,"$(DEV):$(SECN)CNTHST$(MDID).SDIS")
#! Link("$(DEV):$(SECN)CNTHST$(MDID).SDIS","$(DEV):$(SECN)$(MDID).X")
#! Field("$(DEV):$(SECN)CNTHST$(MDID).RES",16777215,0,"$(DEV):$(SECN)CNTHST$(MDID).RES")
#! Field("$(DEV):$(SECN)CNTHST$(MDID).FLNK",16777215,1,"$(DEV):$(SECN)CNTHST$(MDID).FLNK")
#! Link("$(DEV):$(SECN)CNTHST$(MDID).FLNK","$(DEV):$(SECN)RMSHST$(MDID)")
#! Record("$(DEV):$(SECN)RMSHST$(MDID)",3460,2777,0,0,"$(DEV):$(SECN)RMSHST$(MDID)")
#! Field("$(DEV):$(SECN)RMSHST$(MDID).INP",16777215,0,"$(DEV):$(SECN)RMSHST$(MDID).INP")
#! Link("$(DEV):$(SECN)RMSHST$(MDID).INP","$(DEV):$(SECN)$(MDID).L")
#! Field("$(DEV):$(SECN)RMSHST$(MDID).SDIS",16777215,0,"$(DEV):$(SECN)RMSHST$(MDID).SDIS")
#! Link("$(DEV):$(SECN)RMSHST$(MDID).SDIS","$(DEV):$(SECN)$(MDID).X")
#! Field("$(DEV):$(SECN)RMSHST$(MDID).RES",16777215,0,"$(DEV):$(SECN)RMSHST$(MDID).RES")
#! TextBox(TB0,2820,3000,3200,3340,0,"Dialog",12,1,16777215,"$(DEV):$(SECN)$(MDID) Outputs:\n   D = EPICS STAT -$(DEV):$(SECN).STAT - use for one-shot\n   E  = EPICS SEVR - $(DEV):$(SECN).SEVR - use for one-shot\n   H = Variance value used in RMS calc\n    I = B - 1\n    J = B - 2\n   K = A - previous VAL\n   L  = RMS value when average is done\n  N  = goodmeas count\n  O  = reset counters, values (avcnt, goodmeas, stat, timestamp check)\n         Reset occurs from reset sequence\n  Q  = avgcnt\n  W  = Timestamp mismatch\n   X  = history buff enable(1)/disable (0)\n   Y  = count (total pulses counted so far)\n   Z  = outer loop count\n   VAL = Running average \n",null)
#! TextBox(TB4,2480,2120,2760,2320,0,"Dialog",12,1,16777215,"Macros:\nDEV = PRIM:LOCA:UNIT\nMDID= measdef number / ID \nSECN = for BPMS- TMIT, X, Y\n            = for TORO- TMIT\nEGU = Engineering Units \nHOPR, LOPR  =High and Low Operating Limits\nPREC = Precision (# after the decimal point)\nADEL = Archive Delta Amount\n",null)
#! TextBox(TB3,2480,2040,2920,2120,0,"Dialog",14,1,16777215,"Secondary processing \n  Computes avg, rms vals per Secondary per unit per EDEF   \n  Secondaries X, Y, TMIT\n",null)
