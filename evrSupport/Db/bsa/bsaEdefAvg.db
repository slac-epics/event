#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBD("../../dbd/edef.dbd")
#! DBDEND


record(sSub, "$(DEV):$(SECN)$(MDID)") {
  field(DESC, "$(SECN) Avg for EDEF $(MDID)")
  field(INPA, "$(DEV):$(SECN)")
  field(INPB, "EDEF:$(LOCA):$(UNIT):AVGCNTMAX$(MD)")
  field(EGU, "$(EGU)")
  field(HOPR, "$(HOPR)")
  field(LOPR, "$(LOPR)")
  field(PREC, "$(PREC)")
  field(ADEL, "$(ADEL)")
  field(MDEL, "$(MDEL)")
  field(SNAM, "bsaSecnAvg")
  field(BRSV, "INVALID")
  field(DISV, "0")
  field(SDIS, "IOC:$(LOCA):$(UNIT):MODIFIER5.$(BIT)")
  field(FLNK, "$(DEV):$(SECN)HST$(MDID)")
  field(INPD, "$(DEV):$(SECN).STAT")
  field(INPE, "$(DEV):$(SECN).SEVR")
  field(INPC, "EDEF:$(LOCA):$(UNIT):MEASSEVR$(MD)")
}

record(compress, "$(DEV):$(SECN)HST$(MDID)") {
  field(DESC, "$(SECN) Hst for EDEF $(MDID)")
  field(INP, "$(DEV):$(SECN)$(MDID)")
  field(ALG, "Circular Buffer")
  field(NSAM, "2800")
  field(HOPR, "$(HOPR)")
  field(LOPR, "$(LOPR)")
  field(PREC, "$(PREC)")
  field(EGU, "$(EGU)")
  field(DISV, "0")
  field(SDIS, "$(DEV):$(SECN)$(MDID).X")
  field(FLNK, "$(DEV):$(SECN)CNTHST$(MDID)")
}

record(seq, "$(DEV):$(SECN)INIT$(MD)") {
  field(DESC, "EDEF $(MDID) Reset Seq")
  field(SELM, "All")
  field(LNK3, "$(DEV):$(SECN)HST$(MDID).RES")
  field(DOL1, "1")
  field(LNK1, "$(DEV):$(SECN)$(MDID).O")
  field(LNK2, "$(DEV):$(SECN)CNTHST$(MDID).RES")
  field(DISV, "")
  field(SCAN, "Event")
  field(EVNT, "$(EC)")
  field(PRIO, "LOW")
  field(LNK4, "$(DEV):$(SECN)$(MDID).G")
}

record(compress, "$(DEV):$(SECN)CNTHST$(MDID)") {
  field(DESC, "$(SECN) Hst for EDEF $(MDID)")
  field(INP, "$(DEV):$(SECN)$(MDID).M")
  field(ALG, "Circular Buffer")
  field(NSAM, "2800")
  field(HOPR, "$(HOPR)")
  field(LOPR, "$(LOPR)")
  field(PREC, "$(PREC)")
  field(EGU, "$(EGU)")
  field(DISV, "0")
  field(SDIS, "$(DEV):$(SECN)$(MDID).X")
}

#! Further lines contain data used by VisualDCT
#! View(2189,2368,1.1)
#! Record("$(DEV):$(SECN)$(MDID)",2412,2472,0,0,"$(DEV):$(SECN)$(MDID)")
#! Field("$(DEV):$(SECN)$(MDID).INPA",16777215,1,"$(DEV):$(SECN)$(MDID).INPA")
#! Field("$(DEV):$(SECN)$(MDID).INPB",16777215,0,"$(DEV):$(SECN)$(MDID).INPB")
#! Field("$(DEV):$(SECN)$(MDID).VAL",16777215,1,"$(DEV):$(SECN)$(MDID).VAL")
#! Field("$(DEV):$(SECN)$(MDID).INPD",16777215,1,"$(DEV):$(SECN)$(MDID).INPD")
#! Field("$(DEV):$(SECN)$(MDID).INPE",16777215,1,"$(DEV):$(SECN)$(MDID).INPE")
#! Field("$(DEV):$(SECN)$(MDID).SDIS",16777215,1,"$(DEV):$(SECN)$(MDID).SDIS")
#! Field("$(DEV):$(SECN)$(MDID).FLNK",16777215,1,"$(DEV):$(SECN)$(MDID).FLNK")
#! Link("$(DEV):$(SECN)$(MDID).FLNK","$(DEV):$(SECN)HST$(MDID)")
#! Field("$(DEV):$(SECN)$(MDID).O",16777215,0,"$(DEV):$(SECN)$(MDID).O")
#! Field("$(DEV):$(SECN)$(MDID).X",16777215,1,"$(DEV):$(SECN)$(MDID).X")
#! Field("$(DEV):$(SECN)$(MDID).M",16777215,1,"$(DEV):$(SECN)$(MDID).M")
#! Field("$(DEV):$(SECN)$(MDID).INPC",16777215,1,"$(DEV):$(SECN)$(MDID).INPC")
#! Field("$(DEV):$(SECN)$(MDID).G",16777215,1,"$(DEV):$(SECN)$(MDID).G")
#! Record("$(DEV):$(SECN)HST$(MDID)",2792,2379,0,0,"$(DEV):$(SECN)HST$(MDID)")
#! Field("$(DEV):$(SECN)HST$(MDID).INP",16777215,0,"$(DEV):$(SECN)HST$(MDID).INP")
#! Link("$(DEV):$(SECN)HST$(MDID).INP","$(DEV):$(SECN)$(MDID).VAL")
#! Field("$(DEV):$(SECN)HST$(MDID).RES",16777215,0,"$(DEV):$(SECN)HST$(MDID).RES")
#! Field("$(DEV):$(SECN)HST$(MDID).SDIS",16777215,0,"$(DEV):$(SECN)HST$(MDID).SDIS")
#! Link("$(DEV):$(SECN)HST$(MDID).SDIS","$(DEV):$(SECN)$(MDID).X")
#! Field("$(DEV):$(SECN)HST$(MDID).FLNK",16777215,1,"$(DEV):$(SECN)HST$(MDID).FLNK")
#! Link("$(DEV):$(SECN)HST$(MDID).FLNK","$(DEV):$(SECN)CNTHST$(MDID)")
#! Record("$(DEV):$(SECN)INIT$(MD)",2097,2228,0,0,"$(DEV):$(SECN)INIT$(MD)")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK1",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK1")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK1","$(DEV):$(SECN)$(MDID).O")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK2",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK2")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK2","$(DEV):$(SECN)CNTHST$(MDID).RES")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK3",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK3")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK3","$(DEV):$(SECN)HST$(MDID).RES")
#! Field("$(DEV):$(SECN)INIT$(MD).LNK4",16777215,1,"$(DEV):$(SECN)INIT$(MD).LNK4")
#! Link("$(DEV):$(SECN)INIT$(MD).LNK4","$(DEV):$(SECN)$(MDID).G")
#! Visibility("$(DEV):$(SECN)INIT$(MD).LNK2",1)
#! Record("$(DEV):$(SECN)CNTHST$(MDID)",3142,2480,0,0,"$(DEV):$(SECN)CNTHST$(MDID)")
#! Field("$(DEV):$(SECN)CNTHST$(MDID).INP",16777215,0,"$(DEV):$(SECN)CNTHST$(MDID).INP")
#! Link("$(DEV):$(SECN)CNTHST$(MDID).INP","$(DEV):$(SECN)$(MDID).M")
#! Field("$(DEV):$(SECN)CNTHST$(MDID).SDIS",16777215,0,"$(DEV):$(SECN)CNTHST$(MDID).SDIS")
#! Link("$(DEV):$(SECN)CNTHST$(MDID).SDIS","$(DEV):$(SECN)$(MDID).X")
#! Field("$(DEV):$(SECN)CNTHST$(MDID).RES",16777215,0,"$(DEV):$(SECN)CNTHST$(MDID).RES")
#! TextBox(TB0,2793,2746,3163,3082,0,"Dialog",12,1,16777215,"$(DEV):$(SECN)$(MDID) Outputs:\n   D = EPICS STAT -$(DEV):$(SECN).STAT - use for one-shot\n   E  = EPICS SEVR - $(DEV):$(SECN).SEVR - use for one-shot\n   H = Variance value used in RMS calc\n    I = B - 1\n    J = B - 2\n   K = A - previous VAL\n   L  = RMS value when average is done\n  N  = goodmeas count\n  O  = reset counters, values (avcnt, goodmeas, stat, timestamp check)\n         Reset occurs from reset sequence\n   P  = EPICS stat for average\n   S  = EPICS sevr for average\n  Q  = avgcnt\n  W  = Timestamp mismatch\n   X  = history buff enable(1)/disable (0)\n   Y  = count (total pulses counted so far)\n   Z  = outer loop count\n   VAL = Running average \n",null)
#! TextBox(TB4,2638,2162,2937,2363,0,"Dialog",12,1,16777215,"Macros:\nDEV = PRIM:LOCA:UNIT\nMDID= measdef number / ID \nSECN = for BPMS- TMIT, X, Y\n            = for TORO- TMIT\nEGU = Engineering Units \nHOPR, LOPR  =High and Low Operating Limits\nPREC = Precision (# after the decimal point)\nADEL = Archive Delta Amount\nMDEL = Monitor Delta Amount",null)
#! TextBox(TB3,2053,2175,2493,2255,0,"Dialog",14,1,16777215,"Secondary processing \n  Computes avg, rms vals per Secondary per unit per EDEF   \n  Secondaries X, Y, TMIT\n",null)
