#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBDEND


record(longout, "$(DEV)EVENTCTRL") {
  field(DESC, "$(DESC)")
}

record(fanout, "$(DEV)TINI") {
  field(DESC, "$(DESC) Init")
  field(PINI, "NO")
  field(LNK1, "$(DEV)TDES PP")
  field(LNK2, "$(DEV)TWID PP")
  field(LNK3, "$(DEV)TPOL PP")
  field(LNK4, "$(DEV)TCTL PP")
}

record(bo, "$(DEV)TCTL") {
  field(DESC, "$(DESC) Control")
  field(DTYP, "Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.$(TCTL) PP")
  field(ZNAM, "Disabled")
  field(ONAM, "Enabled")
  field(OMSL, "supervisory")
  field(VAL, "$(CTL)")
  field(PINI, "YES")
}

record(bo, "$(DEV)TPOL") {
  field(DESC, "$(DESC) Polarity")
  field(DTYP, "Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.$(TPOL) PP")
  field(ZNAM, "Normal")
  field(ONAM, "Inverted")
  field(OMSL, "supervisory")
  field(VAL, "$(POL)")
  field(PINI, "YES")
}

record(ao, "$(DEV)TWID") {
  field(DESC, "$(DESC) Width")
  field(DTYP, "Raw Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.$(TWID) PP")
  field(OMSL, "supervisory")
  field(LINR, "SLOPE")
  field(EGU, "nsec")
  field(HOPR, "1000000000")
  field(DRVH, "1000000000")
  field(ESLO, "8.40336692324359")
  field(VAL, "$(WID)")
  field(MDEL, "-1")
  field(PINI, "YES")
}

record(ao, "$(DEV)TDES") {
  field(DESC, "$(DESC) Delay")
  field(DTYP, "Raw Soft Channel")
  field(OMSL, "supervisory")
  field(LINR, "SLOPE")
  field(EGU, "nsec")
  field(HOPR, "$(DRVH)")
  field(LOPR, "$(DRVL)")
  field(DRVH, "$(DRVH)")
  field(DRVL, "$(DRVL)")
  field(ESLO, "8.40336692324359")
  field(FLNK, "$(DEV):BW_DIS")
  field(VAL, "$(DES)")
  field(MDEL, "-1")
  field(PINI, "YES")
}

record(ao, "$(DEV)TCON") {
  field(DESC, "$(DESC) Delay")
  field(EGU, "nsec")
  field(HOPR, "$(DRVH)")
  field(LOPR, "$(DRVL)")
  field(DRVH, "$(DRVH)")
  field(DRVL, "$(DRVL)")
  field(PINI, "YES")
  field(MDEL, "-1")
}

record(calc, "$(DEV)TDLYCALC") {
  field(DESC, "$(DESC) Delay")
  field(FLNK, "$(DEV):FW_FOUT")
  field(CALC, "A+B-(C*D)")
  field(INPA, "$(DEV)TDES")
  field(INPB, "$(IOC):TREF CPP")
  field(INPC, "$(IOC):$(TEC)RATE.D")
  field(INPD, "8.40336692324359")
  field(EGU, "nsec")
  field(HOPR, "1000000000")
  field(SDIS, "$(DEV):FW_SW.VAL")
}

record(ao, "$(DEV)TDLY") {
  field(DESC, "$(DESC) EVR Delay")
  field(DTYP, "Raw Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.$(TDES) PP")
  field(OMSL, "closed_loop")
  field(LINR, "SLOPE")
  field(EGU, "nsec")
  field(ESLO, "8.40336692324359")
  field(DOL, "$(DEV)TDLYCALC")
  field(HOPR, "1000000000")
  field(DRVH, "1000000000")
}

record(calc, "$(DEV)BW_TDLYCALC") {
  field(DESC, "Backward Prop.")
  field(SCAN, "Passive")
  field(SDIS, "$(DEV):BW_SW")
  field(FLNK, "$(DEV):FW_DIS")
  field(CALC, "(A+C)*D-B")
  field(INPA, "EVR:$(LOCA):$(UNIT):CTRL.$(TDES) CPP")
  field(INPB, "$(IOC):TREF CPP")
  field(INPC, "$(IOC):$(TEC)RATE.D")
  field(INPD, "8.40336692324359")
  field(DISV, "0")
}

record(ao, "$(DEV)BW_TDES") {
  field(OUT, "$(DEV)TDES PP")
  field(DOL, "$(DEV)BW_TDLYCALC")
  field(OMSL, "closed_loop")
  field(SDIS, "$(DEV):BW_SW")
  field(DISV, "0")
}

record(ai, "$(DEV):BW_SW") {
}

record(ai, "$(DEV):FW_SW") {
}

record(ao, "$(DEV):BW_DIS") {
  field(FLNK, "$(DEV)TDLYCALC")
  field(OUT, "$(DEV):BW_SW PP")
  field(DOL, "0")
  field(OMSL, "closed_loop")
  field(SDIS, "$(DEV):FW_SW")
}

record(ao, "$(DEV):FW_DIS") {
  field(FLNK, "$(DEV):BW_FOUT")
  field(OUT, "$(DEV):FW_SW PP")
  field(DOL, "1")
  field(OMSL, "closed_loop")
}

record(seq, "$(DEV):FW_SEQ") {
  field(DLY1, "10.")
  field(DOL1, "1")
  field(LNK1, "$(DEV):BW_SW PP")
}

record(seq, "$(DEV):BW_SEQ") {
  field(DLY1, "1.")
  field(DOL1, "0")
  field(LNK1, "$(DEV):FW_SW PP")
}

record(fanout, "$(DEV):FW_FOUT") {
  field(FLNK, "$(DEV):FW_SEQ")
  field(LNK1, "$(DEV)TDLY")
}

record(fanout, "$(DEV):BW_FOUT") {
  field(FLNK, "$(DEV):BW_SEQ")
  field(LNK1, "$(DEV)BW_TDES")
}

record(seq, "$(DEV):PROP_SEQ") {
  field(PINI, "YES")
  field(DLY1, "20.")
  field(DOL1, "1.")
  field(LNK1, "$(DEV):FW_SEQ.DLY1 PP")
}

#! Further lines contain data used by VisualDCT
#! View(2609,868,1.0)
#! Record("$(DEV)EVENTCTRL",2300,1370,0,0,"$(DEV)EVENTCTRL")
#! Record("$(DEV)TINI",1880,1340,0,0,"$(DEV)TINI")
#! Field("$(DEV)TINI.LNK1",16777215,1,"$(DEV)TINI.LNK1")
#! Link("$(DEV)TINI.LNK1","$(DEV)TINI/LNK1")
#! Field("$(DEV)TINI.LNK2",16777215,1,"$(DEV)TINI.LNK2")
#! Link("$(DEV)TINI.LNK2","$(DEV)TINI/LNK2")
#! Field("$(DEV)TINI.LNK3",16777215,1,"$(DEV)TINI.LNK3")
#! Link("$(DEV)TINI.LNK3","$(DEV)TINI/LNK3")
#! Field("$(DEV)TINI.LNK4",16777215,1,"$(DEV)TINI.LNK4")
#! Link("$(DEV)TINI.LNK4","$(DEV)TINI/LNK4")
#! Connector("$(DEV)TINI/LNK4","$(DEV)TCTL",2220,1823,16777215,"",0)
#! Connector("$(DEV)TINI/LNK3","$(DEV)TPOL",2240,1703,16777215,"",0)
#! Connector("$(DEV)TINI/LNK2","$(DEV)TWID",2260,1569,16777215,"",0)
#! Connector("$(DEV)TINI/LNK1","$(DEV)TDES",2260,1272,16777215,"",0)
#! Record("$(DEV)TCTL",2300,2012,0,0,"$(DEV)TCTL")
#! Field("$(DEV)TCTL.OUT",16777215,1,"$(DEV)TCTL.OUT")
#! Record("$(DEV)TPOL",2300,1792,0,0,"$(DEV)TPOL")
#! Field("$(DEV)TPOL.OUT",16777215,1,"$(DEV)TPOL.OUT")
#! Record("$(DEV)TWID",2300,1517,0,0,"$(DEV)TWID")
#! Field("$(DEV)TWID.OUT",16777215,1,"$(DEV)TWID.OUT")
#! Record("$(DEV)TDES",2520,929,0,0,"$(DEV)TDES")
#! Field("$(DEV)TDES.VAL",16777215,1,"$(DEV)TDES.VAL")
#! Field("$(DEV)TDES.FLNK",16777215,1,"$(DEV)TDES.FLNK")
#! Link("$(DEV)TDES.FLNK","$(DEV)TDES/FLNK")
#! Connector("$(DEV)TDES/FLNK","$(DEV):BW_DIS",2760,1083,16777215,"",0)
#! Record("$(DEV)TCON",1880,1112,0,0,"$(DEV)TCON")
#! Record("$(DEV)TDLYCALC",3180,925,0,0,"$(DEV)TDLYCALC")
#! Field("$(DEV)TDLYCALC.INPA",16777215,0,"$(DEV)TDLYCALC.INPA")
#! Link("$(DEV)TDLYCALC.INPA","$(DEV)TDLYCALC/INPA")
#! Field("$(DEV)TDLYCALC.INPB",16777215,1,"$(DEV)TDLYCALC.INPB")
#! Field("$(DEV)TDLYCALC.INPC",16777215,0,"$(DEV)TDLYCALC.INPC")
#! Field("$(DEV)TDLYCALC.FLNK",16777215,1,"$(DEV)TDLYCALC.FLNK")
#! Link("$(DEV)TDLYCALC.FLNK","$(DEV)TDLYCALC/FLNK")
#! Field("$(DEV)TDLYCALC.VAL",16777215,1,"$(DEV)TDLYCALC.VAL")
#! Field("$(DEV)TDLYCALC.SDIS",16777215,0,"$(DEV)TDLYCALC.SDIS")
#! Link("$(DEV)TDLYCALC.SDIS","$(DEV):FW_SW.VAL")
#! Connector("$(DEV)TDLYCALC/FLNK","$(DEV):FW_FOUT",3420,994,16777215,"",0)
#! Connector("$(DEV)TDLYCALC/INPA","$(DEV)TDES.VAL",2740,1160,16777215,"",0)
#! Record("$(DEV)TDLY",3820,925,0,0,"$(DEV)TDLY")
#! Field("$(DEV)TDLY.OUT",16777215,1,"$(DEV)TDLY.OUT")
#! Field("$(DEV)TDLY.DOL",16777215,0,"$(DEV)TDLY.DOL")
#! Link("$(DEV)TDLY.DOL","$(DEV)TDLY/DOL")
#! Connector("$(DEV)TDLY/DOL","$(DEV)TDLYCALC.VAL",3480,1180,16777215,"",0)
#! Record("$(DEV)BW_TDLYCALC",3840,1185,0,1,"$(DEV)BW_TDLYCALC")
#! Field("$(DEV)BW_TDLYCALC.INPB",16777215,1,"$(DEV)BW_TDLYCALC.INPB")
#! Field("$(DEV)BW_TDLYCALC.INPA",16777215,1,"$(DEV)BW_TDLYCALC.INPA")
#! Field("$(DEV)BW_TDLYCALC.INPC",16777215,1,"$(DEV)BW_TDLYCALC.INPC")
#! Field("$(DEV)BW_TDLYCALC.VAL",16777215,0,"$(DEV)BW_TDLYCALC.VAL")
#! Field("$(DEV)BW_TDLYCALC.FLNK",16777215,0,"$(DEV)BW_TDLYCALC.FLNK")
#! Link("$(DEV)BW_TDLYCALC.FLNK","$(DEV):FW_DIS")
#! Field("$(DEV)BW_TDLYCALC.SDIS",16777215,0,"$(DEV)BW_TDLYCALC.SDIS")
#! Link("$(DEV)BW_TDLYCALC.SDIS","$(DEV):BW_SW.VAL")
#! Record("$(DEV)BW_TDES",2800,1314,0,1,"$(DEV)BW_TDES")
#! Field("$(DEV)BW_TDES.DOL",16777215,1,"$(DEV)BW_TDES.DOL")
#! Link("$(DEV)BW_TDES.DOL","$(DEV)BW_TDLYCALC.VAL")
#! Field("$(DEV)BW_TDES.OUT",16777215,0,"$(DEV)BW_TDES.OUT")
#! Link("$(DEV)BW_TDES.OUT","$(DEV)TDES.VAL")
#! Field("$(DEV)BW_TDES.SDIS",16777215,1,"$(DEV)BW_TDES.SDIS")
#! Link("$(DEV)BW_TDES.SDIS","$(DEV):BW_SW.VAL")
#! Record("$(DEV):BW_SW",3500,1263,0,1,"$(DEV):BW_SW")
#! Field("$(DEV):BW_SW.VAL",16777215,1,"$(DEV):BW_SW.VAL")
#! Record("$(DEV):FW_SW",2880,1223,0,1,"$(DEV):FW_SW")
#! Field("$(DEV):FW_SW.VAL",16777215,1,"$(DEV):FW_SW.VAL")
#! Record("$(DEV):BW_DIS",2820,894,0,0,"$(DEV):BW_DIS")
#! Field("$(DEV):BW_DIS.FLNK",16777215,1,"$(DEV):BW_DIS.FLNK")
#! Link("$(DEV):BW_DIS.FLNK","$(DEV)TDLYCALC")
#! Field("$(DEV):BW_DIS.DOL",16777215,1,"$(DEV):BW_DIS.DOL")
#! Field("$(DEV):BW_DIS.OUT",16777215,1,"$(DEV):BW_DIS.OUT")
#! Link("$(DEV):BW_DIS.OUT","$(DEV):BW_DIS/OUT")
#! Connector("$(DEV):BW_DIS/OUT","$(DEV):BW_SW.VAL",3120,1200,16777215,"",0)
#! Field("$(DEV):BW_DIS.SDIS",16777215,1,"$(DEV):BW_DIS.SDIS")
#! Link("$(DEV):BW_DIS.SDIS","$(DEV):FW_SW.VAL")
#! Record("$(DEV):FW_DIS",3480,1468,0,1,"$(DEV):FW_DIS")
#! Field("$(DEV):FW_DIS.FLNK",16777215,1,"$(DEV):FW_DIS.FLNK")
#! Link("$(DEV):FW_DIS.FLNK","$(DEV):BW_FOUT")
#! Field("$(DEV):FW_DIS.DOL",16777215,1,"$(DEV):FW_DIS.DOL")
#! Field("$(DEV):FW_DIS.OUT",16777215,0,"$(DEV):FW_DIS.OUT")
#! Link("$(DEV):FW_DIS.OUT","$(DEV):FW_SW.VAL")
#! Record("$(DEV):FW_SEQ",3540,942,0,1,"$(DEV):FW_SEQ")
#! Field("$(DEV):FW_SEQ.LNK1",16777215,0,"$(DEV):FW_SEQ.LNK1")
#! Link("$(DEV):FW_SEQ.LNK1","$(DEV):BW_SW.VAL")
#! Field("$(DEV):FW_SEQ.DOL1",16777215,1,"$(DEV):FW_SEQ.DOL1")
#! Field("$(DEV):FW_SEQ.DLY1",16777215,1,"$(DEV):FW_SEQ.DLY1")
#! Record("$(DEV):BW_SEQ",3160,1462,0,1,"$(DEV):BW_SEQ")
#! Field("$(DEV):BW_SEQ.DOL1",16777215,1,"$(DEV):BW_SEQ.DOL1")
#! Field("$(DEV):BW_SEQ.LNK1",16777215,0,"$(DEV):BW_SEQ.LNK1")
#! Link("$(DEV):BW_SEQ.LNK1","$(DEV):FW_SW.VAL")
#! Record("$(DEV):FW_FOUT",3480,756,0,0,"$(DEV):FW_FOUT")
#! Field("$(DEV):FW_FOUT.LNK1",16777215,1,"$(DEV):FW_FOUT.LNK1")
#! Link("$(DEV):FW_FOUT.LNK1","$(DEV)TDLY")
#! Field("$(DEV):FW_FOUT.FLNK",16777215,1,"$(DEV):FW_FOUT.FLNK")
#! Link("$(DEV):FW_FOUT.FLNK","$(DEV):FW_SEQ")
#! Record("$(DEV):BW_FOUT",3680,1616,0,1,"$(DEV):BW_FOUT")
#! Field("$(DEV):BW_FOUT.FLNK",16777215,0,"$(DEV):BW_FOUT.FLNK")
#! Link("$(DEV):BW_FOUT.FLNK","$(DEV):BW_SEQ")
#! Field("$(DEV):BW_FOUT.LNK1",16777215,0,"$(DEV):BW_FOUT.LNK1")
#! Link("$(DEV):BW_FOUT.LNK1","$(DEV):BW_FOUT/LNK1")
#! Connector("$(DEV):BW_FOUT/LNK1","$(DEV)BW_TDES",3060,1553,16777215,"",0)
#! Record("$(DEV):PROP_SEQ",3860,688,0,1,"$(DEV):PROP_SEQ")
#! Field("$(DEV):PROP_SEQ.LNK1",16777215,0,"$(DEV):PROP_SEQ.LNK1")
#! Link("$(DEV):PROP_SEQ.LNK1","$(DEV):FW_SEQ.DLY1")
#! TextBox(TB0,2161,2479,2455,2572,0,"Dialog",12,1,16777215,"Create a device-centric event code for those devices that have dedicated event codes. This can be written to from HLA's and is an input to the EVR EventCtrl .ENM record.",null)
#! TextBox(TB1,2062,2277,2481,2384,0,"Dialog",12,1,16777215,"Delay (in clock ticks)=\n(<device>:TDES<beamcode> + <group>:TREF<beamcode>) *\n(EVG:<loca>:EV01:CTRL.R1SP/1E9nsec/sec)",null)
