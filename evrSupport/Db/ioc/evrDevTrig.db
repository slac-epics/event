#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longout, "$(DEV)EVENTCTRL") {
  field(DESC, "$(DESC)")
}

record(bo, "$(DEV)STATE") {
  field(DESC, "$(DESC) En/Disable")
  field(DTYP, "Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.OTP$(T) PP")
  field(ZNAM, "Disabled")
  field(ONAM, "Enabled")
  field(OMSL, "supervisory")
  field(VAL, "1")
  field(PINI, "YES")
  field(FLNK, "EVR:$(LOCA):$(UNIT):CTRL.OTP$(T) PP")
}

record(ao, "$(DEV)TWID") {
  field(DESC, "$(DESC) trig width ")
  field(DTYP, "Raw Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.OT$(T)W")
  field(OMSL, "supervisory")
  field(LINR, "LINEAR")
  field(EGU, "$(EGU)")
  field(HOPR, "$(DRVH)")
  field(LOPR, "0")
  field(EGUF, "$(DRVH)")
  field(EGUL, "0")
  field(DRVH, "$(DRVH)")
  field(DRVL, "0")
  field(ESLO, "$(ESLO)")
  field(PINI, "YES")
  field(VAL, "$(WID)")
  field(PREC, "$(PREC)")
}

record(ao, "$(DEV)TDES") {
  field(DESC, "$(DESC) des trig")
  field(DTYP, "Raw Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.OT$(T)D")
  field(OMSL, "supervisory")
  field(LINR, "LINEAR")
  field(EGU, "$(EGU)")
  field(HOPR, "$(DRVH)")
  field(LOPR, "$(DRVL)")
  field(EGUF, "$(DRVH)")
  field(EGUL, "$(DRVL)")
  field(DRVH, "$(DRVH)")
  field(DRVL, "$(DRVL)")
  field(ESLO, "$(ESLO)")
  field(PINI, "YES")
  field(FLNK, "$(DEV)TDLYCALC")
  field(VAL, "$(DES)")
  field(PREC, "$(PREC)")
}

record(ao, "$(DEV)TDLY") {
  field(DESC, "$(DESC) EVR OTxD")
  field(DTYP, "Raw Soft Channel")
  field(OUT, "EVR:$(LOCA):$(UNIT):CTRL.OT$(T)D")
  field(OMSL, "closed_loop")
  field(LINR, "LINEAR")
  field(EGU, "$(EGU)")
  field(HOPR, "$(DRVH)")
  field(LOPR, "0")
  field(EGUF, "$(DRVH)")
  field(EGUL, "0")
  field(DRVH, "$(DRVH)")
  field(DRVL, "0")
  field(ESLO, "$(ESLO)")
  field(VAL, "$(WID)")
  field(DOL, "$(DEV)TDLYCALC.VAL")
  field(PREC, "$(PREC)")
  field(FLNK, "EVR:$(LOCA):$(UNIT):CTRL.OT$(T)D")
}

record(calc, "$(DEV)TDLYCALC") {
  field(FLNK, "$(DEV)TDLY")
  field(CALC, "A+B-C")
  field(INPA, "$(DEV)TDES.VAL ")
  field(INPB, "$(IOC):TREF CPP")
  field(INPC, "IOC:$(EVG):$(TEC)EVNT.I CPP")
}

#! Further lines contain data used by VisualDCT
#! View(2498,1929,1.0)
#! Record("$(DEV)EVENTCTRL",2523,2568,0,0,"$(DEV)EVENTCTRL")
#! Record("$(DEV)STATE",2521,2316,0,0,"$(DEV)STATE")
#! Field("$(DEV)STATE.OUT",16777215,1,"$(DEV)STATE.OUT")
#! Field("$(DEV)STATE.FLNK",16777215,1,"$(DEV)STATE.FLNK")
#! Record("$(DEV)TWID",2515,1965,0,1,"$(DEV)TWID")
#! Field("$(DEV)TWID.OUT",16777215,1,"$(DEV)TWID.OUT")
#! Record("$(DEV)TDES",2718,1964,0,1,"$(DEV)TDES")
#! Field("$(DEV)TDES.OUT",16777215,1,"$(DEV)TDES.OUT")
#! Field("$(DEV)TDES.VAL",16777215,1,"$(DEV)TDES.VAL")
#! Field("$(DEV)TDES.FLNK",16777215,1,"$(DEV)TDES.FLNK")
#! Link("$(DEV)TDES.FLNK","$(DEV)TDLYCALC")
#! Record("$(DEV)TDLY",3388,2174,0,0,"$(DEV)TDLY")
#! Field("$(DEV)TDLY.OUT",16777215,1,"$(DEV)TDLY.OUT")
#! Field("$(DEV)TDLY.DOL",16777215,0,"$(DEV)TDLY.DOL")
#! Link("$(DEV)TDLY.DOL","$(DEV)TDLYCALC.VAL")
#! Field("$(DEV)TDLY.FLNK",16777215,1,"$(DEV)TDLY.FLNK")
#! Record("$(DEV)TDLYCALC",3090,1995,0,1,"$(DEV)TDLYCALC")
#! Field("$(DEV)TDLYCALC.INPA",16777215,0,"$(DEV)TDLYCALC.INPA")
#! Link("$(DEV)TDLYCALC.INPA","$(DEV)TDES.VAL")
#! Field("$(DEV)TDLYCALC.INPB",16777215,1,"$(DEV)TDLYCALC.INPB")
#! Field("$(DEV)TDLYCALC.INPC",16777215,0,"$(DEV)TDLYCALC.INPC")
#! Link("$(DEV)TDLYCALC.INPC","$(DEV)TDLYEC.VAL")
#! Field("$(DEV)TDLYCALC.FLNK",16777215,1,"$(DEV)TDLYCALC.FLNK")
#! Link("$(DEV)TDLYCALC.FLNK","$(DEV)TDLY")
#! Field("$(DEV)TDLYCALC.VAL",16777215,1,"$(DEV)TDLYCALC.VAL")
#! TextBox(TB0,2161,2479,2455,2572,0,"Dialog",12,1,16777215,"Create a device-centric event code for those devices that have dedicated event codes. This can be written to from HLA's and is an input to the EVR EventCtrl .ENM record.",null)
#! TextBox(TB1,2062,2277,2481,2384,0,"Dialog",12,1,16777215,"Delay (in clock ticks)=\n(<device>:TDES<beamcode> + <group>:TREF<beamcode>) *\n(EVG:<loca>:EV01:CTRL.R1SP/1E9nsec/sec)",null)
