#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBD("../../dbd/edef.dbd")
#! DBDEND


record(bo, "EDEF:$(SYS):$(MD):CTRL") {
  field(DESC, "State Control")
  field(ZNAM, "OFF")
  field(ZSV, "MAJOR")
  field(ONAM, "ON")
  field(VAL, "$(CTRL)")
  field(OUT, "EDEF:$(SYS):$(MD):CTRLSEL.A PP")
  field(PINI, "YES")
  field(OMSL, "supervisory")
}

record(mbbo, "EDEF:$(SYS):$(MD):MODE") {
  field(DESC, "Acquisition Mode")
  field(ZRST, "USER")
  field(ONST, "SYSTEM")
  field(DOL, "$(MODE)")
  field(PINI, "YES")
}

record(longout, "EDEF:$(SYS):$(MD):AVGCNTMAX") {
  field(DESC, "Number Pulses to Average")
  field(DRVH, "100")
  field(VAL, "$(NAVG)")
  field(MDEL, "-1")
  field(PINI, "YES")
  field(OUT, "EDEF:$(SYS):$(MD):CNTMAX.A PP")
  field(HOPR, "10")
  field(LOPR, "0")
}

# DRVH limit on VAL needs to be at least 2800 (SCP limit) but can be made larger later if needed.
record(longout, "EDEF:$(SYS):$(MD):MEASCNTMAX") {
  field(DESC, "Number of Points to Measure")
  field(DRVH, "2800")
  field(DRVL, "-1")
  field(MDEL, "-1")
  field(PINI, "YES")
  field(OUT, "EDEF:$(SYS):$(MD):CNTMAX.B PP")
  field(DOL, "$(NMEAS)")
  field(HOPR, "2800")
  field(LOPR, "-1")
}

record(stringout, "EDEF:$(SYS):$(MD):NAME") {
  field(DESC, "EDEF name")
  field(VAL, "$(NAME)")
  field(PINI, "YES")
  field(FLNK, "EDEF:$(SYS):$(MD):NAMETOD")
}

record(stringout, "EDEF:$(SYS):$(MD):USERNAME") {
  field(DESC, "Owner Name")
  field(VAL, "$(USER)")
  field(PINI, "YES")
}

record(calc, "EDEF:$(SYS):$(MD):CNTMAX") {
  field(DESC, "Maximum Pulses")
  field(CALC, "A*B")
  field(HOPR, "280000")
  field(LOPR, "0")
  field(MDEL, "-1")
}

record(timestamp, "EDEF:$(SYS):$(MD):NAMETOD") {
  field(DESC, "Last reserved tod")
}

record(longout, "EDEF:$(SYS):$(MD):BEAMCODE") {
  field(DESC, "Beam Code")
  field(DRVH, "256")
  field(DRVL, "-1")
  field(DOL, "1")
  field(MDEL, "-1")
  field(PINI, "YES")
}

record(sSub, "EDEF:$(SYS):$(MD):PATTERNCHECK") {
  field(DESC, "Check if Pulse Used")
  field(SNAM, "mpgPatternCheck")
  field(INPB, "$(DEV):PNET.J MS")
  field(INPD, "$(DEV):PNET.D MS")
  field(INPE, "$(DEV):PNET.E MS")
  field(INPF, "$(DEV):PNET.F MS")
  field(INPG, "$(DEV):PNET.G MS")
  field(INPH, "$(DEV):MODIFIER5INP")
  field(INPI, "EDEF:$(SYS):$(MD):BEAMCODE")
  field(INPM, "EDEF:$(SYS):$(MD):INCLUSION1")
  field(INPN, "EDEF:$(SYS):$(MD):INCLUSION2")
  field(INPO, "EDEF:$(SYS):$(MD):INCLUSION3")
  field(INPP, "EDEF:$(SYS):$(MD):INCLUSION4")
  field(INPQ, "EDEF:$(SYS):$(MD):INCLUSION5")
  field(INPR, "EDEF:$(SYS):$(MD):EXCLUSION1")
  field(INPS, "EDEF:$(SYS):$(MD):EXCLUSION2")
  field(INPT, "EDEF:$(SYS):$(MD):EXCLUSION3")
  field(INPU, "EDEF:$(SYS):$(MD):EXCLUSION4")
  field(INPV, "EDEF:$(SYS):$(MD):EXCLUSION5")
  field(INPW, "$(DEV):PNET.SEVR")
  field(BRSV, "INVALID")
  field(DISV, "0")
  field(DISS, "INVALID")
  field(FLNK, "EDEF:$(SYS):$(MD):CTRLOFF")
  field(INPX, "EDEF:$(SYS):$(MD):CNTMAX")
}

record(calc, "EDEF:$(SYS):$(MD):CTRLSEL") {
  field(FLNK, "EDEF:$(SYS):$(MD):CTRLFO")
  field(CALC, "A+1")
  field(INPB, "EDEF:$(SYS):$(MD):CTRLONTOD.PROC PP")
}

record(fanout, "EDEF:$(SYS):$(MD):CTRLFO") {
  field(SELM, "Specified")
  field(SELL, "EDEF:$(SYS):$(MD):CTRLSEL")
  field(LNK1, "EDEF:$(SYS):$(MD):DISABLE PP")
  field(LNK2, "EDEF:$(SYS):$(MD):CTRLON PP")
}

record(seq, "EDEF:$(SYS):$(MD):CTRLON") {
  field(LNK1, "EDEF:$(SYS):$(MD):RESET.PROC PP")
  field(DLY2, "3")
  field(DOL2, "1")
  field(LNK2, "EDEF:$(SYS):$(MD):PATTERNCHECK.DISA")
}

record(seq, "EDEF:$(SYS):$(MD):RESET") {
  field(DOL1, "0")
  field(LNK1, "EDEF:$(SYS):$(MD):PATTERNCHECK.A")
  field(DOL2, "0")
  field(LNK2, "EDEF:$(SYS):$(MD):PATTERNCHECK.Y")
  field(DOL3, "0")
  field(LNK3, "EDEF:$(SYS):$(MD):PATTERNCHECK.Z")
  field(DOL4, "1")
  field(LNK4, "EDEF:$(SYS):$(MD):INIT PP")
  field(DLY5, "3")
  field(DOL5, "0")
  field(LNK5, "EDEF:$(SYS):$(MD):INIT PP")
}


record(bo, "EDEF:$(SYS):$(MD):DISABLE") {
  field(OUT, "EDEF:$(SYS):$(MD):PATTERNCHECK.DISA")
  field(DOL, "0")
  field(OMSL, "closed_loop")
}

record(longout, "EDEF:$(SYS):$(MD):CNT") {
  field(DESC, "Actual Meas Count")
  field(SCAN, "1 second")
  field(DOL, "EDEF:$(SYS):$(MD):PATTERNCHECK.Y")
  field(HOPR, "280000")
  field(LOPR, "0")
  field(MDEL, "-1")
  field(OMSL, "closed_loop")
}

record(timestamp, "EDEF:$(SYS):$(MD):CTRLONTOD") {
  field(DESC, "EDEF Activation Time")
  field(DISV, "2")
  field(SDIS, "EDEF:$(SYS):$(MD):CTRLSEL")
}

record(bo, "EDEF:$(SYS):$(MD):CTRLOFF") {
  field(DISV, "0")
  field(SDIS, "EDEF:$(SYS):$(MD):PATTERNCHECK.Z")
  field(OMSL, "closed_loop")
  field(DOL, "0")
  field(OUT, "EDEF:$(SYS):$(MD):CTRL.VAL PP")
}

record(bo, "EDEF:$(SYS):$(MD):INIT") {
  field(PINI, "YES")
  field(DOL, "0")
  field(ZNAM, "NOINIT")
  field(ONAM, "INIT")
}


record(stringout, "EDEF:$(SYS):$(MD):USERNAMEFREE") {
  field(DESC, "Clear Owner Name")
  field(VAL, "$(USER)")
  field(OMSL, "closed_loop")
  field(OUT, "EDEF:$(SYS):$(MD):USERNAME PP")
}

record(seq, "EDEF:$(SYS):$(MD):FREE") {
  field(DESC, "Free EDEF")
  field(LNK1, "EDEF:$(SYS):$(MD):CTRL PP")
  field(LNK2, "EDEF:$(SYS):$(MD):NAMEFREE.PROC")
  field(LNK3, "EDEF:$(SYS):$(MD):USERNAMEFREE.PROC")
}


record(stringout, "EDEF:$(SYS):$(MD):NAMEFREE") {
  field(DESC, "Clear Name")
  field(VAL, "$(NAME)")
  field(OMSL, "closed_loop")
  field(OUT, "EDEF:$(SYS):$(MD):NAME PP")
}

record(stringout, "EDEF:$(SYS):$(MD):INCMS1") {
}

record(stringout, "EDEF:$(SYS):$(MD):INCMS2") {
}

record(stringout, "EDEF:$(SYS):$(MD):INCMS3") {
}

record(stringout, "EDEF:$(SYS):$(MD):INCMS4") {
}

record(stringout, "EDEF:$(SYS):$(MD):EXCMS1") {
}

record(stringout, "EDEF:$(SYS):$(MD):EXCMS2") {
}

record(stringout, "EDEF:$(SYS):$(MD):EXCMS3") {
}

record(stringout, "EDEF:$(SYS):$(MD):EXCMS4") {
}

record(fanout, "EDEF:$(SYS):$(MD):PATTERNFO") {
  field(FLNK, "EDEF:$(SYS):$(MD):PULSEID")
  field(LNK1, "EDEF:$(SYS):$(MD):MODIFIER1")
  field(LNK2, "EDEF:$(SYS):$(MD):MODIFIER2")
  field(LNK3, "EDEF:$(SYS):$(MD):MODIFIER3")
  field(LNK4, "EDEF:$(SYS):$(MD):MODIFIER4")
  field(LNK5, "EDEF:$(SYS):$(MD):MODIFIER5")
  field(LNK6, "EDEF:$(SYS):$(MD):BUNCHARGE")
  field(DISV, "0")
  field(SDIS, "$(DEV):MODIFIER5.$(BIT)")
}

#! Further lines contain data used by VisualDCT
#! View(476,1819,0.8)
#! Record("EDEF:$(SYS):$(MD):CTRL",1340,2450,0,1,"EDEF:$(SYS):$(MD):CTRL")
#! Field("EDEF:$(SYS):$(MD):CTRL.FLNK",16777215,1,"EDEF:$(SYS):$(MD):CTRL.FLNK")
#! Field("EDEF:$(SYS):$(MD):CTRL.VAL",16777215,1,"EDEF:$(SYS):$(MD):CTRL.VAL")
#! Record("EDEF:$(SYS):$(MD):MODE",1940,1613,0,0,"EDEF:$(SYS):$(MD):MODE")
#! Field("EDEF:$(SYS):$(MD):MODE.DOL",16777215,1,"EDEF:$(SYS):$(MD):MODE.DOL")
#! Record("EDEF:$(SYS):$(MD):AVGCNTMAX",1338,1490,0,1,"EDEF:$(SYS):$(MD):AVGCNTMAX")
#! Field("EDEF:$(SYS):$(MD):AVGCNTMAX.OUT",16777215,1,"EDEF:$(SYS):$(MD):AVGCNTMAX.OUT")
#! Link("EDEF:$(SYS):$(MD):AVGCNTMAX.OUT","EDEF:$(SYS):$(MD):CNTMAX.A")
#! Record("EDEF:$(SYS):$(MD):MEASCNTMAX",1338,1737,0,1,"EDEF:$(SYS):$(MD):MEASCNTMAX")
#! Field("EDEF:$(SYS):$(MD):MEASCNTMAX.OUT",16777215,1,"EDEF:$(SYS):$(MD):MEASCNTMAX.OUT")
#! Link("EDEF:$(SYS):$(MD):MEASCNTMAX.OUT","EDEF:$(SYS):$(MD):CNTMAX.B")
#! Field("EDEF:$(SYS):$(MD):MEASCNTMAX.DOL",16777215,1,"EDEF:$(SYS):$(MD):MEASCNTMAX.DOL")
#! Record("EDEF:$(SYS):$(MD):NAME",1120,2667,0,1,"EDEF:$(SYS):$(MD):NAME")
#! Field("EDEF:$(SYS):$(MD):NAME.FLNK",16777215,1,"EDEF:$(SYS):$(MD):NAME.FLNK")
#! Link("EDEF:$(SYS):$(MD):NAME.FLNK","EDEF:$(SYS):$(MD):NAMETOD")
#! Field("EDEF:$(SYS):$(MD):NAME.VAL",16777215,1,"EDEF:$(SYS):$(MD):NAME.VAL")
#! Record("EDEF:$(SYS):$(MD):USERNAME",1100,2902,0,1,"EDEF:$(SYS):$(MD):USERNAME")
#! Field("EDEF:$(SYS):$(MD):USERNAME.VAL",16777215,1,"EDEF:$(SYS):$(MD):USERNAME.VAL")
#! Record("EDEF:$(SYS):$(MD):CNTMAX",1675,1573,0,1,"EDEF:$(SYS):$(MD):CNTMAX")
#! Field("EDEF:$(SYS):$(MD):CNTMAX.A",16777215,0,"EDEF:$(SYS):$(MD):CNTMAX.A")
#! Field("EDEF:$(SYS):$(MD):CNTMAX.B",16777215,0,"EDEF:$(SYS):$(MD):CNTMAX.B")
#! Field("EDEF:$(SYS):$(MD):CNTMAX.VAL",16777215,1,"EDEF:$(SYS):$(MD):CNTMAX.VAL")
#! Record("EDEF:$(SYS):$(MD):NAMETOD",1380,2749,0,0,"EDEF:$(SYS):$(MD):NAMETOD")
#! Record("EDEF:$(SYS):$(MD):BEAMCODE",2220,2759,0,1,"EDEF:$(SYS):$(MD):BEAMCODE")
#! Field("EDEF:$(SYS):$(MD):BEAMCODE.VAL",16777215,1,"EDEF:$(SYS):$(MD):BEAMCODE.VAL")
#! Record("EDEF:$(SYS):$(MD):PATTERNCHECK",2800,2358,0,0,"EDEF:$(SYS):$(MD):PATTERNCHECK")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPB",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPB")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPD",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPD")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPE",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPE")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPF",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPF")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPG",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPG")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPH",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPH")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPI",16777215,0,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPI")
#! Link("EDEF:$(SYS):$(MD):PATTERNCHECK.INPI","EDEF:$(SYS):$(MD):BEAMCODE.VAL")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPM",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPM")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPN",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPN")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPO",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPO")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPP",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPP")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPQ",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPQ")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPR",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPR")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPS",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPS")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPT",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPT")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPU",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPU")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPV",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPV")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPW",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPW")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.FLNK",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.FLNK")
#! Link("EDEF:$(SYS):$(MD):PATTERNCHECK.FLNK","EDEF:$(SYS):$(MD):CTRLOFF")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.Y",16777215,0,"EDEF:$(SYS):$(MD):PATTERNCHECK.Y")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.Z",16777215,1,"EDEF:$(SYS):$(MD):PATTERNCHECK.Z")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.DISA",16777215,0,"EDEF:$(SYS):$(MD):PATTERNCHECK.DISA")
#! Field("EDEF:$(SYS):$(MD):PATTERNCHECK.INPX",16777215,0,"EDEF:$(SYS):$(MD):PATTERNCHECK.INPX")
#! Link("EDEF:$(SYS):$(MD):PATTERNCHECK.INPX","EDEF:$(SYS):$(MD):CNTMAX.VAL")
#! Record("EDEF:$(SYS):$(MD):CTRLSEL",1640,2527,0,0,"EDEF:$(SYS):$(MD):CTRLSEL")
#! Field("EDEF:$(SYS):$(MD):CTRLSEL.FLNK",16777215,1,"EDEF:$(SYS):$(MD):CTRLSEL.FLNK")
#! Link("EDEF:$(SYS):$(MD):CTRLSEL.FLNK","EDEF:$(SYS):$(MD):CTRLFO")
#! Field("EDEF:$(SYS):$(MD):CTRLSEL.VAL",16777215,1,"EDEF:$(SYS):$(MD):CTRLSEL.VAL")
#! Field("EDEF:$(SYS):$(MD):CTRLSEL.INPA",16777215,0,"EDEF:$(SYS):$(MD):CTRLSEL.INPA")
#! Link("EDEF:$(SYS):$(MD):CTRLSEL.INPA","EDEF:$(SYS):$(MD):CTRL.VAL")
#! Field("EDEF:$(SYS):$(MD):CTRLSEL.INPB",16777215,1,"EDEF:$(SYS):$(MD):CTRLSEL.INPB")
#! Link("EDEF:$(SYS):$(MD):CTRLSEL.INPB","EDEF:$(SYS):$(MD):CTRLONTOD.PROC")
#! Record("EDEF:$(SYS):$(MD):CTRLFO",1960,2467,0,0,"EDEF:$(SYS):$(MD):CTRLFO")
#! Field("EDEF:$(SYS):$(MD):CTRLFO.SELL",16777215,0,"EDEF:$(SYS):$(MD):CTRLFO.SELL")
#! Link("EDEF:$(SYS):$(MD):CTRLFO.SELL","EDEF:$(SYS):$(MD):CTRLSEL.VAL")
#! Field("EDEF:$(SYS):$(MD):CTRLFO.LNK2",16777215,1,"EDEF:$(SYS):$(MD):CTRLFO.LNK2")
#! Link("EDEF:$(SYS):$(MD):CTRLFO.LNK2","EDEF:$(SYS):$(MD):CTRLON")
#! Field("EDEF:$(SYS):$(MD):CTRLFO.LNK1",16777215,1,"EDEF:$(SYS):$(MD):CTRLFO.LNK1")
#! Link("EDEF:$(SYS):$(MD):CTRLFO.LNK1","EDEF:$(SYS):$(MD):DISABLE")
#! Record("EDEF:$(SYS):$(MD):CTRLON",2240,2067,0,0,"EDEF:$(SYS):$(MD):CTRLON")
#! Field("EDEF:$(SYS):$(MD):CTRLON.LNK1",16777215,1,"EDEF:$(SYS):$(MD):CTRLON.LNK1")
#! Link("EDEF:$(SYS):$(MD):CTRLON.LNK1","EDEF:$(SYS):$(MD):RESET.PROC")
#! Field("EDEF:$(SYS):$(MD):CTRLON.LNK2",16777215,1,"EDEF:$(SYS):$(MD):CTRLON.LNK2")
#! Link("EDEF:$(SYS):$(MD):CTRLON.LNK2","EDEF:$(SYS):$(MD):PATTERNCHECK.DISA")
#! Record("EDEF:$(SYS):$(MD):RESET",2720,1997,0,0,"EDEF:$(SYS):$(MD):RESET")
#! Field("EDEF:$(SYS):$(MD):RESET.PROC",16777215,0,"EDEF:$(SYS):$(MD):RESET.PROC")
#! Field("EDEF:$(SYS):$(MD):RESET.LNK2",16777215,0,"EDEF:$(SYS):$(MD):RESET.LNK2")
#! Link("EDEF:$(SYS):$(MD):RESET.LNK2","EDEF:$(SYS):$(MD):PATTERNCHECK.Z")
#! Field("EDEF:$(SYS):$(MD):RESET.LNK1",16777215,0,"EDEF:$(SYS):$(MD):RESET.LNK1")
#! Link("EDEF:$(SYS):$(MD):RESET.LNK1","EDEF:$(SYS):$(MD):PATTERNCHECK.Y")
#! Field("EDEF:$(SYS):$(MD):RESET.LNK3",16777215,1,"EDEF:$(SYS):$(MD):RESET.LNK3")
#! Link("EDEF:$(SYS):$(MD):RESET.LNK3","EDEF:$(SYS):$(MD):INIT.VAL")
#! Field("EDEF:$(SYS):$(MD):RESET.DOL4",16777215,1,"EDEF:$(SYS):$(MD):RESET.DOL4")
#! Field("EDEF:$(SYS):$(MD):RESET.LNK4",16777215,1,"EDEF:$(SYS):$(MD):RESET.LNK4")
#! Link("EDEF:$(SYS):$(MD):RESET.LNK4","EDEF:$(SYS):$(MD):INIT.VAL")
#! Record("EDEF:$(SYS):$(MD):DISABLE",2220,2582,0,0,"EDEF:$(SYS):$(MD):DISABLE")
#! Field("EDEF:$(SYS):$(MD):DISABLE.OUT",16777215,1,"EDEF:$(SYS):$(MD):DISABLE.OUT")
#! Link("EDEF:$(SYS):$(MD):DISABLE.OUT","EDEF:$(SYS):$(MD):PATTERNCHECK.DISA")
#! Record("EDEF:$(SYS):$(MD):CNT",2220,3005,0,1,"EDEF:$(SYS):$(MD):CNT")
#! Field("EDEF:$(SYS):$(MD):CNT.DOL",16777215,1,"EDEF:$(SYS):$(MD):CNT.DOL")
#! Link("EDEF:$(SYS):$(MD):CNT.DOL","EDEF:$(SYS):$(MD):PATTERNCHECK.Y")
#! Record("EDEF:$(SYS):$(MD):CTRLONTOD",1960,2682,0,0,"EDEF:$(SYS):$(MD):CTRLONTOD")
#! Field("EDEF:$(SYS):$(MD):CTRLONTOD.PROC",16777215,0,"EDEF:$(SYS):$(MD):CTRLONTOD.PROC")
#! Field("EDEF:$(SYS):$(MD):CTRLONTOD.SDIS",16777215,0,"EDEF:$(SYS):$(MD):CTRLONTOD.SDIS")
#! Link("EDEF:$(SYS):$(MD):CTRLONTOD.SDIS","EDEF:$(SYS):$(MD):CTRLSEL.VAL")
#! Record("EDEF:$(SYS):$(MD):CTRLOFF",3180,3093,0,0,"EDEF:$(SYS):$(MD):CTRLOFF")
#! Field("EDEF:$(SYS):$(MD):CTRLOFF.SDIS",16777215,0,"EDEF:$(SYS):$(MD):CTRLOFF.SDIS")
#! Link("EDEF:$(SYS):$(MD):CTRLOFF.SDIS","EDEF:$(SYS):$(MD):PATTERNCHECK.Z")
#! Field("EDEF:$(SYS):$(MD):CTRLOFF.OUT",16777215,0,"EDEF:$(SYS):$(MD):CTRLOFF.OUT")
#! Link("EDEF:$(SYS):$(MD):CTRLOFF.OUT","EDEF:$(SYS):$(MD):CTRL.VAL")
#! Record("EDEF:$(SYS):$(MD):INIT",3020,2127,0,1,"EDEF:$(SYS):$(MD):INIT")
#! Field("EDEF:$(SYS):$(MD):INIT.VAL",16777215,0,"EDEF:$(SYS):$(MD):INIT.VAL")
#! TextBox(TB4,2060,2000,2300,2060,0,"Dialog",22,1,16777215,"Client Processing",null)
#! TextBox(TB3,2020,1460,1340,1380,0,"Dialog",22,1,16777215,"Event Definitions (EDEFs) and 360 Hz Processing\nfor Beam Synchronous Acquisition (BSA)",null)
#! TextBox(TB2,1320,2000,1860,2360,0,"Dialog",12,1,16777215,"CA user:\nRequests EDEF, supplies NAME\n\nReservation Sequence:\nReserves an EDEF for HLA by finding a vacant NAME and populating\nSets INIT record so that bsadevices can clear their history waveforms,\n  thereby invalidating prior EDEF\n\nCA user:\nUpon finding NAME, configures assigned EDEF with masks, etc\nSets CTRL to ON\n\nDatabase:\nUpon CTRL ON (set by CA user):\nSets RESET input to PATTERNCHECK so that it will reset next time around\nWait 3 seconds to ensure all bsads to clear waveforms\nEnable PATTERNCHECK\nOFF (set by PATTERNCHECK when done):\nDisable PATTERNCHECK\n",null)
#! TextBox(TB1,1320,2360,1620,2420,0,"Dialog",13,0,16777215,"CTRL  set ON by HLA or CA user.\nCTRL set OFF by PATTERNCHECK being done\n ",null)
#! TextBox(TB0,2980,2320,3260,2380,0,"Dialog",22,1,16777215,"360 Hz Processing",null)
#! TextBox(TB10,660,2300,1180,2500,0,"Dialog",12,1,16777215,"A client will request an EDEF by filling out the EDEFUSERNAME.\nNote: client must ensure that USERNAME is unique and doesn't\nalready have an EDEF assignment.\nEDEFRESERVE inputs this name, and if there is a slot avail, places in \nappropriate EDEF:$(SYS):$(MDID):USERNAME.\n\nThe client, after a delay, checks all the EDEF:$(SYS):$(MDID):USERNAMEs for \nrequested EDEFUSERNAME. If it exists in a slot, the client has successfully \nreserved that slot.\n\nTo release the EDEF, the user sets FREE",null)
#! TextBox(TB8,2900,2060,3220,2120,0,"Dialog",12,1,16777215,"EVR IOCs monitor INIT records to know when to reset, in order to reset their counters, etc, ahead of the first beam pulse.",null)
#! TextBox(TB7,3060,2580,3520,2960,0,"Dialog",13,0,16777215,"EDEF:$(SYS):$(MD):PATTERNCHECK\nOutputs:\nDONE\nMEASCNT\nVAL  = pattern match =1/ no match=0 flag for \n            or EDEF:$(SYS):$(MD):CNT\n       (SDIS sets DISA which is compared to DISV=0)\n       (   when DISA=DISV, record is disabled)\n\n//Process next (VAL=1) & BEAMCODE, INCL, EXCL match:\nVAL=0;\n   if  (pattern BEAMCODE == EDEF BEAMCODE) \n    {\n       if (EDEF INCLUSION1-4 & pattern MODIFIER1-4 == EDEF INCLUSION1-5) {\n          if (EDEF EXCLUSION1-4 & pattern MODIFIER1-4 ==0) {\n              VAL= 1;\n              Z++;\n          }\n       }\n    } \nreturn(0)\n",null)
#! TextBox(TB5,1960,1400,2420,1600,0,"Dialog",13,0,16777215,"MACROS:\nSYS = System ID (SYS0 for production, SYS1 or SYS2 for development)\nMD = event definition number\nInitial Value Macros:\n  NAVG = Number to Average\n  NMEAS = Number to measure\n  CTRL  = Initially OFF (0) or ON (1)\n  USER = Initial User ID\n  NAME = Event def name\n  MODE = User (0) or System (1) \n",null)
#! Record("EDEF:$(SYS):$(MD):USERNAMEFREE",840,2887,0,1,"EDEF:$(SYS):$(MD):USERNAMEFREE")
#! Field("EDEF:$(SYS):$(MD):USERNAMEFREE.OUT",16777215,1,"EDEF:$(SYS):$(MD):USERNAMEFREE.OUT")
#! Link("EDEF:$(SYS):$(MD):USERNAMEFREE.OUT","EDEF:$(SYS):$(MD):USERNAME.VAL")
#! Field("EDEF:$(SYS):$(MD):USERNAMEFREE.PROC",16777215,0,"EDEF:$(SYS):$(MD):USERNAMEFREE.PROC")
#! Record("EDEF:$(SYS):$(MD):FREE",560,2527,0,1,"EDEF:$(SYS):$(MD):FREE")
#! Field("EDEF:$(SYS):$(MD):FREE.LNK1",16777215,1,"EDEF:$(SYS):$(MD):FREE.LNK1")
#! Link("EDEF:$(SYS):$(MD):FREE.LNK1","EDEF:$(SYS):$(MD):CTRL.VAL")
#! Field("EDEF:$(SYS):$(MD):FREE.LNK2",16777215,1,"EDEF:$(SYS):$(MD):FREE.LNK2")
#! Link("EDEF:$(SYS):$(MD):FREE.LNK2","EDEF:$(SYS):$(MD):NAMEFREE.PROC")
#! Field("EDEF:$(SYS):$(MD):FREE.LNK3",16777215,1,"EDEF:$(SYS):$(MD):FREE.LNK3")
#! Link("EDEF:$(SYS):$(MD):FREE.LNK3","EDEF:$(SYS):$(MD):USERNAMEFREE.PROC")
#! Record("EDEF:$(SYS):$(MD):NAMEFREE",860,2687,0,1,"EDEF:$(SYS):$(MD):NAMEFREE")
#! Field("EDEF:$(SYS):$(MD):NAMEFREE.OUT",16777215,1,"EDEF:$(SYS):$(MD):NAMEFREE.OUT")
#! Link("EDEF:$(SYS):$(MD):NAMEFREE.OUT","EDEF:$(SYS):$(MD):NAME.VAL")
#! Field("EDEF:$(SYS):$(MD):NAMEFREE.PROC",16777215,0,"EDEF:$(SYS):$(MD):NAMEFREE.PROC")
